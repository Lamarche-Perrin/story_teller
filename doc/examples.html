<html>

  <head>
    <title>Examples d'utilisation du langage narratif</title>
    <meta content="text/html" charset="UTF-8">
    <style>
	  .box { width:600px; padding:10px; border:2px solid yellowgreen; } 
	</style>
  </head>

  <body>

	<h1>Les briques de base</h1>

	<hr>

	<h2>Hello world!</h2>

	Exemple de narration minimale&nbsp;: une unique situation.

	<h3>Code</h3>
	<xmp class="box">
	  <NARRATION START="hello">

		<SITUATION ID="hello">
		  <CONTENT>
			<PRINT>Hello world!</PRINT>
			<END/>
		  </CONTENT>
		</SITUATION>

	  </NARRATION>
	</xmp>

	<h3>Explications</h3>
	<ul>
	  <li>
		Toutes les briques doivent être incluses dans une unique balise <code>NARRATION</code>.
		L'attribut <code>START</code> de la <code>NARRATION</code> indique la première <code>SITUATION</code> à exécuter en précisant son attribut <code>ID</code>.
	  </li>
	  <li>
		La balise <code>CONTENT</code> au sein d'une <code>SITUATION</code> indique son contenu, c'est-à-dire les événements à exécuter.
		En particulier, la balise <code>PRINT</code> permet d'afficher du texte et la balise <code>END</code> permet d'indiquer que l'histoire est terminée.
	  </li>
	</ul>



	<hr>

	<h2>Transitions</h2>

	Deux situations et une transition permettant de les relier.

	<h3>Code</h3>
	<xmp class="box">
	  <NARRATION START="hello">

		<SITUATION ID="hello">
		  <CONTENT>
			<PRINT>Hello...</PRINT>
		  </CONTENT>
		</SITUATION>

		<TRANSITION FROM="hello" TO="world">
		  <CONTENT>
			<PRINT>(Wait for it)</PRINT>
		  </CONTENT>
		</TRANSITION>

		<SITUATION ID="world">
		  <CONTENT>
			<PRINT>...world!</PRINT>
			<END/>
		  </CONTENT>
		</SITUATION>

	  </NARRATION>
	</xmp>

	<h3>Explications</h3>
	<ul>
	  <li>
		Les balises <code>TRANSITION</code> permettent de créer des chemins narratifs entre des situations.
		L'attribut <code>FROM</code> indique l'<code>ID</code> de la <code>SITUATION</code> de départ et l'attribut <code>TO</code> indique l'<code>ID</code> de la <code>SITUATION</code> d'arrivée.
	  </li>
	  <li>
		Une <code>TRANSITION</code> peut également avoir un <code>CONTENT</code> qui est exécuté lorsqu'elle est empruntée.
	  </li>
	</ul>



	<hr>

	<h2>Choix</h2>

	Un choix permettant au joueur de choisir une transition parmi plusieurs, et d'ainsi influencer la narration.

	<h3>Code</h3>
	<xmp class="box">
	  <NARRATION START="hello">

		<SITUATION ID="hello">
		  <CONTENT>
			<PRINT>Hello...</PRINT>
		  </CONTENT>
		</SITUATION>

		<TRANSITION FROM="hello" TO="world">
		  <CHOICE>World?</CHOICE>
		</TRANSITION>

		<TRANSITION FROM="hello" TO="universe">
		  <CHOICE>Universe?</CHOICE>
		</TRANSITION>

		<SITUATION ID="world">
		  <CONTENT>
			<PRINT>...world!</PRINT>
			<END/>
		  </CONTENT>
		</SITUATION>

		<SITUATION ID="universe">
		  <CONTENT>
			<PRINT>...universe!</PRINT>
			<END/>
		  </CONTENT>
		</SITUATION>

	  </NARRATION>
	</xmp>

	<h3>Explications</h3>
	<ul>
	  <li>
		Une balise <code>CHOICE</code> associée à une <code>TRANSITION</code> indique que le joueur doit faire un choix.
		Dans ce cas, le <code>CHOICE</code> de toutes les <code>TRANSITION</code> partant de la <code>SITUATION</code> actuelle s'afficheront, et la transition effectivement exécutée dépendra de la réponse fournie par le joueur.
	  </li>
	</ul>



	<hr>

	<h2>Probabilités</h2>

	Deux transitions, l'une d'entre elles est choisie de manière aléatoire.

	<h3>Code</h3>
	<xmp class="box">
	  <NARRATION START="hello">

		<SITUATION ID="hello">
		  <CONTENT>
			<PRINT>Hello...</PRINT>
		  </CONTENT>
		</SITUATION>

		<TRANSITION FROM="hello" TO="world">
		  <PROBABILITY>200</PROBABILITY>
		</TRANSITION>

		<TRANSITION FROM="hello" TO="universe">
		  <PROBABILITY>100</PROBABILITY>
		</TRANSITION>

		<SITUATION ID="world">
		  <CONTENT>
			<PRINT>...world!</PRINT>
			<END/>
		  </CONTENT>
		</SITUATION>

		<SITUATION ID="universe">
		  <CONTENT>
			<PRINT>...universe!</PRINT>
			<END/>
		  </CONTENT>
		</SITUATION>

	  </NARRATION>
	</xmp>

	<h3>Explications</h3>
	<ul>
	  <li>
		S'il y a plusieurs <code>TRANSITION</code> (sans <code>CHOICE</code>) partant de la <code>SITUATION</code> actuelle, celle qui sera exécutée est choisie aléatoirement.
		La balise <code>PROBABILITY</code> associée à une <code>TRANSITION</code> indique alors les chances que celle-ci soit exécutée.
	  </li>
	  <li>
		Ici, la première <code>TRANSITION</code> a <code>200</code> chances d'être exécutée et la seconde <code>100</code>.
		La première sera donc exécutée deux fois plus souvent que la seconde.
	  </li>
	  <li>
		Une <code>TRANSITTION</code> sans <code>PROBABILITY</code> explicite a toujours une <code>PROBABILITY</code> de <code>100</code>.
	  </li>
	</ul>



	<hr>

	<h2>Variables binaires, conditions et priorités</h2>

	Un variable définie dans la première situation, et qui a un impact sur la trame narrative empruntée.

	<h3>Code</h3>
	<xmp class="box">
	  <NARRATION START="hello">

		<SITUATION ID="hello">
		  <CONTENT>
			<VARIABLE ID="var" TYPE="binary" INIT_VALUE="false"/>
			<PRINT>Hello...</PRINT>
		  </CONTENT>
		</SITUATION>

		<TRANSITION FROM="hello" TO="world"/>

		<TRANSITION FROM="hello" TO="universe">
		  <PRIORITY>1</PRIORITY>
		  <CONDITION>
			<TEST VARIABLE="var" COMP="eq" VALUE="true"/>
		  </CONDITION>
		</TRANSITION>

		<SITUATION ID="world">
		  <CONTENT>
			<PRINT>...world!</PRINT>
			<END/>
		  </CONTENT>
		</SITUATION>

		<SITUATION ID="universe">
		  <CONTENT>
			<PRINT>...universe!</PRINT>
			<END/>
		  </CONTENT>
		</SITUATION>

	  </NARRATION>
	</xmp>

	<h3>Explications</h3>
	<ul>
	  <li>R1</li>
	  <li>R2</li>
	</ul>




	<hr>

	<h2>Compteurs</h2>

	Un compteur qui peut être incrémenté et avoir un impact sur la narration.

	<h3>Code</h3>
	<xmp class="box">
	  <NARRATION START="hello">

		<SITUATION ID="hello">
		  <CONTENT>
			<VARIABLE ID="var" TYPE="counter" INIT_VALUE="3"/>
			<PRINT>Hello...</PRINT>
		  </CONTENT>
		</SITUATION>

		<TRANSITION FROM="hello" TO="wait"/>

		<SITUATION ID="wait"/>

		<TRANSITION FROM="wait" TO="wait">
		  <CONTENT>
			<SUB VARIABLE="var" VALUE="1"/>
			<PRINT>(wait)</PRINT>
		  </CONTENT>
		</TRANSITION>

		<TRANSITION FROM="wait" TO="world">
		  <PRIORITY>1</PRIORITY>
		  <CONDITION>
			<TEST VARIABLE="var" COMP="eq" VALUE="0"/>
		  </CONDITION>
		</TRANSITION>

		<SITUATION ID="world">
		  <CONTENT>
			<PRINT>...world!</PRINT>
			<END/>
		  </CONTENT>
		</SITUATION>

	  </NARRATION>
	</xmp>

	<h3>Explications</h3>
	<ul>
	  <li>R1</li>
	  <li>R2</li>
	</ul>

	<hr>

</html>
